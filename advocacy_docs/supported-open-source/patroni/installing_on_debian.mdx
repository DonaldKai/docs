---
title: 'Installing Patroni on Debian-compatible systems'
navTitle: 'Installing Patroni on Debian'
description: "A walkthrough on how to install Patroni with PostgreSQL or EPAS on Debian or Ubuntu systems"
---

You can create an highly available demo cluster using EDB Postgres Advanced Server version 14 and PostgreSQL 14 on Debian 10. The two database nodes in streaming replication are pg-patroni1 and pg-patroni2.

## EDB Postgres Advanced Server

On both pg-patroni1 and pg-patroni2 hosts, install EDB Postgres Advanced Server:

```bash
sudo apt install -y wget gnupg2 apt-transport-https
sudo sh -c 'echo "deb [arch=amd64] https://apt.enterprisedb.com/$(lsb_release -cs)-edb/ $(lsb_release -cs) main" > /etc/apt/sources.list.d/edb-$(lsb_release -cs).list'

# Replace '<USERNAME>' and '<PASSWORD>' below with your username and password for the EDB repositories
sudo sh -c 'echo "machine apt.enterprisedb.com login <USERNAME> password <PASSWORD>" > /etc/apt/auth.conf.d/edb.conf'
wget -q -O - https://<USERNAME>:<PASSWORD>@apt.enterprisedb.com/edb-deb.gpg.key | sudo apt-key add -

sudo apt update
sudo apt -y install edb-as14-server
sudo systemctl stop edb-as@14-main
sudo rm -fr /var/lib/edb-as/14/main
sudo systemctl disable edb-as@14-main
```

More information about installing EDB Postgres Advanced Server using the EDB repository can be found in [EDB docs](/epas/latest/epas_inst_linux/installing_epas_using_edb_repository).


## PostgreSQL

On both pg-patroni1 and pg-patroni2 hosts, install PostgreSQL:

```bash
sudo apt install curl ca-certificates gnupg
curl https://www.postgresql.org/media/keys/ACCC4CF8.asc | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/apt.postgresql.org.gpg >/dev/null

sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
sudo apt update
sudo apt install postgresql-14
sudo systemctl stop edb-as@14-main
sudo rm -fr /var/lib/edb-as/14/main
sudo systemctl disable postgresql@14-main
```

More information about installing PostgreSQL can be found in [PostgreSQL Linux downloads website](https://www.postgresql.org/download/linux/debian/).

## Patroni

On both pg-patroni1 and pg-patroni2 hosts, install Patroni and its dependencies for etcd.

Configure the [PostgreSQL](https://www.postgresql.org/download/linux/ubuntu/) apt repository and then run the install command:

```bash
$ sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
$ wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
$ sudo apt-get update
$ sudo apt-get -y install patroni
```

### Post-installation

Patroni creates the initial PostgreSQL cluster and is in charge of starting the service, so be sure `systemctl` is disabled for the PostgreSQL service. (In the [Patroni](#patroni] code snippet, we disabled the service.)

We've also removed the data directory that Debian packages creates with initdb as part of installing the PostgreSQL and EPAS server packages. 

After installing the etcd nodes, you can configure them.