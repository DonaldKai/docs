---
title: 'Installing Patroni on RedHat-compatible systems'
navTitle: 'Installing Patroni on RHEL'
description: "A walkthrough on how to install Patroni with PostgreSQL or EPAS on RedHat Enterprise Linux family systems"
---

You can create an highly available demo cluster using EDB Postgres Advanced Server version 14 and PostgreSQL 14 on RedHat Enterprise Linux 8. The two database nodes in streaming replication are pg-patroni1 and pg-patroni2.

## EDB Postgres Advanced Server

On both pg-patroni1 and pg-patroni2 hosts, install EDB Postgres Advanced Server:

```bash
sudo dnf -y install https://yum.enterprisedb.com/edbrepos/edb-repo-latest.noarch.rpm

#  Replace 'USERNAME' and 'PASSWORD' below with
#  your username and password for the EDB repository:
sudo sed -i "s@<username>:<password>@USERNAME:PASSWORD@" /etc/yum.repos.d/edb.repo

sudo dnf -y install epel-release
sudo dnf config-manager --set-enabled powertools
sudo dnf -qy module disable postgresql
sudo dnf -y install edb-as14-server
sudo systemctl disable edb-as-14
```

More information about installing EDB Postgres Advanced Server using the EDB repository can be found in [EDB docs](/epas/latest/epas_inst_linux/installing_epas_using_edb_repository).


## PostgreSQL

On both pg-patroni1 and pg-patroni2 hosts, install PostgreSQL:

```bash
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sudo dnf -qy module disable postgresql
sudo dnf install -y postgresql14-server postgresql14-contrib
sudo systemctl disable postgresql-14
```

More information about installing PostgreSQL can be found in the [PostgreSQL Linux downloads website](https://www.postgresql.org/download/linux/redhat/).

## Patroni

On both pg-patroni1 and pg-patroni2 hosts, install Patroni and its dependencies for etcd.

Patroni requires Extra Packages for Enterprise Linux ([EPEL](https://fedoraproject.org/wiki/EPEL)). Configure the [PostgreSQL](https://yum.postgresql.org/) yum/dnf repository accordingly.

After you configure the repositories, install Patroni and its dependencies for etcd:

```bash
sudo dnf install -y epel-release
sudo dnf install -y patroni patroni-etcd
```

## Post-installation instructions

Patroni creates the initial PostgreSQL cluster and is in charge of starting the service, so be sure `systemctl` is disabled for the PostgreSQL service. (In the [Patroni](#patroni) code snippet we disabled the service.)

Configure the firewall so the nodes accept connections to the PostgreSQL service running in them.

If installing PostgreSQL you can use the following code snippet, which adds the PostgreSQL service opening port 5432:

```bash
sudo firewall-cmd --quiet --permanent --add-service=postgresql
sudo firewall-cmd --quiet --reload
```

If you're installing EDB Postgres Advanced Server or using a customer port for PostgreSQL or EDB Postgres Advanced Server, use the following code. Adjust the port number to the one used in your environment. (Here it's the EDB Postgres Advanced Server default 5444.)

```bash
sudo firewall-cmd --quiet --permanent --add-port=5444/tcp
sudo firewall-cmd --quiet --reload
```
