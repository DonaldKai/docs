---
title: RefData
---

The RefData TAM trades the concurrency of updates to a reference table for better INSERT and UPDATE performance on tables, which refer through foreign keys to the reference table. This feature is achieved by taking an Exclusive lock on the reference table whenever it is modified, blocking out concurrent modifications by any other session as well as modifications to tables which reference the table. For example:

```sql
CREATE TABLE department (
	department_id	SERIAL PRIMARY KEY,
	department_name	TEXT
) USING refdata;

CREATE TABLE employee (
	...
	department_id	NOT NULL REFERENCES department(department_id)
);
```

The `employee` table is just a standard heap table; only the `department` table uses the `refdata` TAM. Inserts and updates of the employee table don't take out row level locks on the department table, thereby saving query time, avoiding the need to update the rows in the department table, and avoiding the need to write out the referred-to department table rows to disk and to the write ahead log.

If updates to the `department` table are frequent, using the refdata TAM isn't advisable, because concurrent modifcations to it and to the employee table are then blocked. If only infrequent changes are made to the `department` table, speeding up frequent changes to the employee table, and reducing write ahead log traffic may well be worth this cost.